{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2f9935af5747c4a544a1","webpack:///./src/index.js","webpack:///external \"css-selector-parser\""],"names":["originalAttributes","selector","elementClassname","elementSelector","counter","styleEl","parsed","selectorParser","definition","elementAttributes","rules","console","rule","inner","additionalAttributes","element","document","isEventAttr","attr","Array","getElementSelector","ensureStyleElement","parseCSSRules","str","attributesObjectToArray","array","Object","value"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"styled-element\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"styled-element\"] = factory();\n\telse\n\t\troot[\"styled-element\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2f9935af5747c4a544a1","import { CssSelectorParser } from 'css-selector-parser';\n\nconst selectorParser = new CssSelectorParser();\n\nexport const getElementSelector = (css) => {\n  // a valid selector is needed for the generation of the tag\n  const selector = /^([^{]+)\\s*[^:]*\\s*\\{/.exec(css);\n  if (!selector || !selector[1]) throw new Error('No valid selector');\n  return selector[1];\n};\n\n// retrieve or create a \"global\" style element\n// which holds the styles of all styledElements\n// and ensure it is in the document's head\nexport const ensureStyleElement = () => {\n  const styleEl = document.getElementById('styled-element') || document.createElement('style');\n  if (!document.head.contains(styleEl)) {\n    document.head.appendChild(styleEl);\n  }\n  return styleEl;\n};\n\nexport const parseCSSRules = (css, selector, elementSelector) => css\n  .split(/^}/gm)\n  .filter(str => str.trim())\n  .map(str => str.split(selector.trim()).join(elementSelector));\n\nexport const attributesObjectToArray = (object) => {\n  const array = [];\n  Object.keys(object).forEach((name) => {\n    array.push({ name, value: object[name] });\n  });\n  return array;\n};\n\nlet counter = 0;\nexport default function styledElement(css, originalAttributes = {}) {\n  const selector = getElementSelector(css);\n  const elementClassname = `se-${counter}`;\n  const elementSelector = `.${elementClassname}`;\n  counter += 1;\n\n  const styleEl = ensureStyleElement();\n\n  const parsed = selectorParser.parse(selector);\n  const definition = parsed.rule || parsed.selectors.shift().rule;\n  const { tagName, attrs } = definition;\n  const elementAttributes = [...(attrs || []), ...attributesObjectToArray(originalAttributes)];\n\n  // in order to allow several rules to be passed (to define states like :hover, :focus...)\n  // we need to split and add the seperately\n  const rules = parseCSSRules(css, selector, elementSelector);\n  // eslint-disable-next-line no-console\n  console.log('rules', rules);\n  rules.forEach(rule => `${styleEl.sheet.insertRule(rule)}}`);\n\n  return (inner = '', additionalAttributes = {}) => {\n    const element = document.createElement(tagName || 'div');\n    element.className = elementClassname;\n\n    [\n      ...elementAttributes,\n      ...attributesObjectToArray(additionalAttributes),\n    ].forEach((attr) => {\n      const isEventAttr = attr.name.indexOf('on') === 0;\n\n      if (isEventAttr && typeof attr.value === 'function') {\n        element.addEventListener(attr.name.slice(2), attr.value);\n      } else if (isEventAttr && Array.isArray(attr.value)) {\n        element.addEventListener(attr.name.slice(2), ...attr.value);\n      } else {\n        element.setAttribute(attr.name, attr.value);\n      }\n    });\n\n    if (typeof inner === 'string') {\n      element.textContent = inner;\n    } else if (inner instanceof HTMLElement) {\n      element.appendChild(inner);\n    }\n\n    return element;\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"css-selector-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"css-selector-parser\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}